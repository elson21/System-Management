<nav class="navbar is-dark" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href="/" hx-get="/" hx-target="#main-content">
      <strong>System Management</strong>
    </a>

    <label for="navbar-toggle" class="navbar-burger" aria-label="menu" aria-expanded="false">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </label>
  </div>

  <input type="checkbox" id="navbar-toggle" style="display: none;">
  <div id="navbarBasicAuth" class="navbar-menu">
    <div class="navbar-start">
      <a class="navbar-item" href="/" hx-get="/" hx-target="#main-content">
        Home
      </a>
      
      {% if user %}
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">
          Systems
        </a>
        <div class="navbar-dropdown">
          <a class="navbar-item" hx-get="/api/systems" hx-target="#main-content">
            View Systems
          </a>
          <a class="navbar-item" hx-get="/add-systems" hx-target="#main-content">
            Add Systems
          </a>
        </div>
      </div>

      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">
          Users
        </a>
        <div class="navbar-dropdown">
          <a class="navbar-item" hx-get="/add-users" hx-target="#main-content">
            Add Users
          </a>
        </div>
      </div>

      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">
          Activity
        </a>
        <div class="navbar-dropdown">
          <a class="navbar-item" hx-get="/api/activity" hx-target="#main-content">
            View Activity
          </a>
        </div>
      </div>

      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">
          Dashboard
        </a>
        <div class="navbar-dropdown">
          <a class="navbar-item" hx-get="/api/dashboard" hx-target="#main-content">
            View Dashboard
          </a>
        </div>
      </div>

      {% if user.is_admin %}
      <div class="navbar-item">
        <a class="navbar-item has-text-warning" hx-get="/admin/create-user" hx-target="#main-content">
          <span class="icon">
            <i class="fas fa-user-plus"></i>
          </span>
          <span>Create User</span>
        </a>
      </div>
      {% endif %}
      {% endif %}
    </div>

    <div class="navbar-end">
      <div class="navbar-item">
        <div class="buttons">
          {% if user %}
          <!-- Show when authenticated -->
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link">
              <span>{{ user.email }}</span>
              {% if user.is_admin %}
              <span class="tag is-warning is-small ml-2">ADMIN</span>
              {% endif %}
            </a>
            <div class="navbar-dropdown is-right">
              <a class="navbar-item" hx-get="/api/dashboard" hx-target="#main-content">
                Dashboard
              </a>
              <a class="navbar-item" hx-get="/api/systems" hx-target="#main-content">
                Systems
              </a>
              <hr class="navbar-divider">
              <a class="navbar-item" href="/logout">
                Logout
              </a>
            </div>
          </div>
          {% else %}
          <!-- Show when not authenticated -->
          <a href="/login" class="button is-primary">
            <strong>Sign in</strong>
          </a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</nav>

<style>
  #navbar-toggle:checked ~ #navbarBasicAuth {
    display: block !important;
  }
  
  @media (max-width: 1023px) {
    #navbarBasicAuth {
      display: none;
    }
  }
</style>